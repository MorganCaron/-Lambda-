(()=>{"use strict";var t,e,r=function(){return(r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},n=function(){function t(){this.elements=[]}return t.prototype.save=function(t){var e=this;this.elements=[],Array.from(t.childNodes).forEach((function(t){t instanceof Element&&e.elements.push({element:t,rect:t.getBoundingClientRect()})}))},t.prototype.play=function(t){this.elements.forEach((function(e){var n=e.rect,i=e.element.getBoundingClientRect();if(i.width&&i.height){var o=n.x-i.x,s=n.y-i.y;e.element.animate&&(o||s)&&e.element.animate([{transformOrigin:"top left",transform:"translate("+o+"px, "+s+"px)"},{transformOrigin:"top left",transform:"none"}],r(r({},t),{fill:"both"}))}}))},t}(),i=(t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)},function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}),o=function(){return(o=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)},s=function(){function t(t){void 0===t&&(t=""),this.el=document.createTextNode(t)}return t.prototype.setText=function(t){this.el.textContent=t},t.prototype.render=function(){return this.el},t}(),a=function(){function t(t){this.el=t}return t.prototype.found=function(){return null!=this.el},t.prototype.delete=function(){this.el&&this.el.remove()},t.prototype.setAttrs=function(t){if(this.el){var e=function(e){if("string"==typeof t[e])r.el.setAttribute(e,t[e]);else if(r.el.addEventListener(e,(function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r[0].preventDefault();var i=t[e];i.apply(void 0,r)})),"click"===e)if("A"===r.el.tagName)r.el.setAttribute("href","#");else{var n=r.el.getAttribute("style");r.el.setAttribute("style","cursor: pointer;"+(n||""))}},r=this;for(var n in t)e(n)}},t.prototype.clearChilds=function(){for(;this.el.firstChild;)this.el.removeChild(this.el.firstChild)},t.prototype.addChilds=function(t){var e=this;t.forEach((function(t){e.el.appendChild(t.el)}))},t.prototype.setContent=function(t){if(this.el){var e=[];"string"==typeof t&&""!==t?e=[new s(t)]:Array.isArray(t)&&(e=t),this.clearChilds(),this.addChilds(e)}},t.prototype.setText=function(t){this.setContent(t)},t}(),h=function(t){function e(e,r,n){void 0===r&&(r=""),void 0===n&&(n={});var i=t.call(this,document.createElement(e))||this;return i.setAttrs(n),i.setContent(r),i}return i(e,t),e}(a),u=(function(t){function e(e){return t.call(this,e.el)||this}i(e,t),e.prototype.update=function(){this.setContent(this.render()),this.afterRender()},e.prototype.render=function(){return[]},e.prototype.afterRender=function(){}}(a),function(t){function e(){var e=t.call(this,document.querySelector("head"))||this;return['meta[name="viewport"]',"meta[charset]"].forEach((function(t){document.querySelectorAll(t).forEach((function(t){t&&t.remove()}))})),e.addChilds([new h("meta","",{name:"viewport",content:"width=device-width, initial-scale=1"}),new h("meta","",{charset:"UTF-8"})]),e}return i(e,t),e}(a));(function(t){function e(e){void 0===e&&(e=void 0);var r=t.call(this,document.body)||this;return r.animationOptions=o({duration:500,easing:"ease-in-out"},e),r.el.innerHTML="",r._head=new u,r}i(e,t),e.prototype.compareTagName=function(t,e){return r=t instanceof Element,n=e instanceof Element,!(r?!n:n)&&(t instanceof Text?t.wholeText==e.wholeText:t instanceof Element&&t.tagName==e.tagName);var r,n},e.prototype.updateAttributes=function(t,e){var r=Array.from(t.attributes),n=Array.from(e.attributes);r.forEach((function(r){var n=r.name;e.hasAttribute(n)||t.removeAttribute(n)})),n.forEach((function(r){var n=r.name,i=(null==e?void 0:e.getAttribute(n))||"";t.hasAttribute(n)&&t.getAttribute(n)===e.getAttribute(n)||t.setAttribute(n,i)}))},e.prototype.updateChilds=function(t,e){var r=Array.from(t.children).length,i=e.length,s=new n;s.save(t);for(var a=0;a<r||a<i;++a){var h=t.children[a],u=e[a];!h&&u?t.appendChild(u).animate([{opacity:0},{opacity:1}],o(o({},this.animationOptions),{fill:"both"})):h&&!u?t.removeChild(h):this.compareTagName(h,u)&&h.textContent===u.textContent?(this.updateAttributes(h,u),h.isEqualNode(u)||(0==u.children.length&&h.textContent!==u.textContent?h.textContent=u.textContent:this.updateChilds(h,Array.from(u.children)))):t.replaceChild(u,h)}s.play(this.animationOptions)},e.prototype.setContent=function(t){if(this.el){var e=[];"string"==typeof t&&""!==t?e=[new s(t)]:Array.isArray(t)&&(e=t),this.updateChilds(this.el,e.map((function(t){return t.el})))}},e.prototype.update=function(){this.setContent(this.render()),this.afterRender()},e.prototype.render=function(){return[]},e.prototype.afterRender=function(){},Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!1,configurable:!0})})(a),function(){function t(){this.values=[],this.indexValue=0,this.indexChar=0}t.prototype.currentValue=function(){return this.values[this.indexValue]},t.prototype.currentString=function(){return this.currentValue()},t.prototype.currentChar=function(){return this.currentValue()[this.indexChar]},t.prototype.isSpace=function(t){return" \t\n".includes(t)},t.prototype.isChar=function(t){return/[\.@_\-0-9A-Za-z]/.test(t)},t.prototype.isString=function(){return"string"==typeof this.currentValue()},t.prototype.isVDOMText=function(){return this.currentValue()instanceof s},t.prototype.isEndOfString=function(){return this.indexChar>=this.currentString().length},t.prototype.isEndOfValues=function(){return this.indexValue>=this.values.length},t.prototype.gotoNextValue=function(){this.isEndOfValues()||(++this.indexValue,this.indexChar=0)},t.prototype.getNextWord=function(){for(var t="";!this.isEndOfString()&&this.isChar(this.currentChar());)t+=this.currentChar(),++this.indexChar;return t},t.prototype.parseCommentary=function(){var t=this.currentChar();if(++this.indexChar,"/"==t){var e=this.currentString().substring(this.indexChar).indexOf("\n");-1!=e&&(this.indexChar+=e+1)}else if("*"==t){var r=this.currentString().substring(this.indexChar).indexOf("*/");-1!=r&&(this.indexChar+=r+2)}this.parseSpace()},t.prototype.parseSpace=function(){for(;!this.isEndOfString()&&this.isSpace(this.currentChar());)++this.indexChar;this.indexChar+1<this.currentString().length&&"/"==this.currentChar()&&"/*".includes(this.currentString()[this.indexChar+1])&&(++this.indexChar,this.parseCommentary(),this.isEndOfString()&&this.gotoNextValue())},t.prototype.parseQuote=function(){var t=this,e=this.currentChar();if(!"'\"".includes(e))throw new Error("Syntax error: Character \" ou ' is missing.");++this.indexChar;for(var r="",n=function(){return!t.isEndOfString()&&t.currentChar()===e};!this.isEndOfValues()&&this.isString()&&!n();)if(this.isEndOfString())t.indexValue+1<t.values.length&&"string"==typeof t.values[t.indexValue+1]&&(r+=this.values[++this.indexValue],this.gotoNextValue());else{if("\\"===this.currentChar()&&(++this.indexChar,this.isEndOfString()))throw new Error("Syntax error: Character \\ must be followed by a character to escape.");r+=this.currentChar(),++this.indexChar}if(this.isEndOfValues()||!n())throw new Error("Syntax error: A closing brace "+e+' is missing after "'+r+'".');return++this.indexChar,r},t.prototype.parseValue=function(){if(this.parseSpace(),!this.isEndOfString()&&"'\"".includes(this.currentChar()))return this.parseQuote();if(this.isEndOfString()){this.gotoNextValue();var t=this.currentValue();if("function"!=typeof t)throw new Error("Syntax error: The placeholder is not a function.");return this.gotoNextValue(),t}return this.getNextWord()},t.prototype.parseAttributes=function(){for(var t={};!this.isEndOfString()&&this.isChar(this.currentChar());){var e=this.getNextWord();if(this.parseSpace(),this.isEndOfString()||":"!==this.currentChar())throw new Error("Syntax error: Character ':' is missing after \""+e+'" attribute.');++this.indexChar,t[e]=this.parseValue(),this.parseSpace()}return t},t.prototype.parseElement=function(){var t=this.values[this.indexValue];if(t instanceof s)return t;if("string"==typeof t){if("'\"".includes(this.currentChar()))return new s(this.parseQuote());var e=this.getNextWord();if(0===e.length&&this.isEndOfString())return null;if(0===e.length)throw new Error('Syntax error: Tag name is missing in "'+t+'".');this.parseSpace();var r=this.parseAttributes(),n=void 0;if(this.isEndOfString())throw new Error('Syntax error: Missing element content or semicolon after "'+e+" "+JSON.stringify(r)+'"');if("'\"".includes(this.currentChar()))n=this.parseQuote();else{if(";"===this.currentChar())return++this.indexChar,new h(e,"",r);if("{"!==this.currentChar())throw new Error("Syntax error: Character '{' or ';' is missing  after \""+e+" "+JSON.stringify(r)+'"');++this.indexChar,n=this.parseBlock(!0)}return new h(e,n,r)}if(t instanceof a)return t;if(null==t)return null;throw new Error("Syntax error: Use of a function out of context")},t.prototype.parseBlock=function(t){var e=this;void 0===t&&(t=!1);var r=[],n=function t(){!e.isEndOfValues()&&e.isString()&&(e.parseSpace(),e.isEndOfString()&&(e.gotoNextValue(),t()))};for(n();!this.isEndOfValues()&&(!t||!this.isString()||this.isEndOfString()||"}"!==this.currentChar());){var i=this.parseElement();i&&r.push(i),"string"!=typeof this.currentValue()&&this.gotoNextValue(),n()}if(t){if(this.isEndOfValues()||!this.isString()||this.isEndOfString()||"}"!==this.currentChar())throw new Error("Syntax error: Character '}' is missing at the end of \""+this.values+'".');++this.indexChar,this.parseSpace()}return r},t.prototype.parseView=function(t){return this.values=t,this.indexValue=0,this.indexChar=0,this.parseBlock()},t.prototype.parseTag=function(t){this.values=t,this.indexValue=0,this.indexChar=0;var e=this.getNextWord();if(0==e.length)throw new Error("Syntax error: Tag name is missing.");this.parseSpace();var r=this.parseAttributes();return new h(e,"",r)}}(),function(){function t(t){this.dependencies=[],this._value=t}t.prototype.depend=function(t){this.dependencies.push(t)},t.prototype.subscribe=function(t){this._updateFunction=t},t.prototype.update=function(){this._updateFunction&&this._updateFunction(),this.dependencies.forEach((function(t){t.update()}))},Object.defineProperty(t.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t,this.update()},enumerable:!1,configurable:!0})}(),new(function(){function t(t){void 0===t&&(t=void 0),this.routes=[],this.root="/",this._mode=t||history.pushState?"history":"hash",this.currentFragment=null}return Object.defineProperty(t.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=history.pushState?t:"hash"},enumerable:!1,configurable:!0}),t.prototype.clearSlashes=function(t){return t.toString().replace(/\/$/,"").replace(/^\//,"")},t.prototype.getFragment=function(){var t="";if("history"===this._mode)t=(t=this.clearSlashes(decodeURI(location.pathname+location.search))).replace(/\?(.*)$/,""),t="/"!=this.root?t.replace(this.root,""):t;else{var e=window.location.href.match(/#(.*)$/);t=e?e[1]:""}return this.clearSlashes(t)},t.prototype.openFragment=function(t){for(var e=0;e<this.routes.length;++e){var r=this.routes[e],n=t.match("^"+r.regex+"$");n&&(n.shift(),r.controller.apply({},n))}},t.prototype.add=function(t,e){this.routes.push({regex:t,controller:e})},t.prototype.remove=function(t){for(var e=0;e<this.routes.length;++e){var r=this.routes[e];t.toString()===r.regex.toString()&&this.routes.splice(e,1)}},t.prototype.check=function(t){return null!==this.getFragment().match("^"+t+"$")},t.prototype.listen=function(){var t=this,e=function(){t.currentFragment!==t.getFragment()&&(t.currentFragment=t.getFragment(),t.openFragment(t.currentFragment))};e(),window.addEventListener("popstate",e.bind(this))},t.prototype.navigate=function(t){t=t||"","history"===this._mode?history.pushState(null,"",this.root+this.clearSlashes(t)):window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+t,this.currentFragment!==this.getFragment()&&(this.currentFragment=this.getFragment(),this.openFragment(this.currentFragment))},t}()),function(t){t[t.NoChange=0]="NoChange",t[t.Insertion=1]="Insertion",t[t.Substitution=2]="Substitution",t[t.Deletion=3]="Deletion"}(e||(e={}))})();